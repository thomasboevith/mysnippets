# Pairwise looping over arguments in bash                                                                                                                                                                                                                                                                                                                  
#!/bin/bash
arguments=( $@ )
for (( i=0; i<${#arguments[@]} ; i+=2 )) ; do
    echo "${arguments[i]}" "${arguments[i+1]}"
done

# Rounding float value in bash
value=3.14159
printf '%.*f\n' 2 "$value"  # Rounded to two decimal places
printf '%.*f\n' 3 "$value"  # Rounded to three decimal places

# Org-mode to PDF with pandoc
pandoc -s text.org -o text.pdf

# Bash for loop
for ((i=0; i<10; i++)); do
  echo $i
done

# Validate a date using GNU date
date -d 2019-02-30 &> /dev/null; exitstatus=$?; if test $exitstatus -eq 0; then echo Valid; else echo Not valid; fi

# Convert between lower case to upper case
echo "Abc" | tr '[:upper:]' '[:lower:]'
echo "Abc" | gawk '{print tolower($0)}'

# Join multiple PDF/ps files
gs -dBATCH -dNOPAUSE -q -sDEVICE=pdfwrite -dAutoRotatePages=/None -sOutputFile=output.pdf file1.pdf file2.pdf file3.ps

# Convert PNG images to animated GIF using ImageMagick and gifsicle
convert img1.png img2.png img3.png gif:- | gifsicle --delay=100 --loop --optimize=3 -o animated.gif

# Get links from a web page
lynx -dump -listonly -nonumbers google.com

# Using temporary directory and files
tmpdir=$(mktemp --directory /tmp/mytmpdir.XXXXXXXX)
tmpfile=$(mktemp --tmpdir=$tmpdir mytmpfile.XXXXXXXX)
ls -l $tmpfile
if test -d "$tmpdir"; then
  rm -r $tmpdir  # Cleaning up
fi

# Finding nearest time intervals (rounding down)
# E.g. nearest 5 minute interval from 16:28 is 16:25, nearest 10 minute interval is 16:20
now=$(date +%s)
echo Now: $(date -u -d@$now +%F\ %T)
for i in $(seq 12); do
    echo Nearest $i second interval: $(date -u -d@$(echo "scale=0; $now - ($now % $i)" | bc) +%F\ %T)
    echo Nearest $i minute interval: $(date -u -d@$(echo "scale=0; $now - ($now % ($i * 60))" | bc) +%F\ %T)
    echo Nearest $i hour interval: $(date -u -d@$(echo "scale=0; $now - ($now % ($i * 60 * 60))" | bc) +%F\ %T)
done
